# Production Security Configuration
# Copy this file to .env.production and update with your actual values

# üîê CRITICAL SECURITY SETTINGS - CHANGE ALL VALUES IN PRODUCTION!

# Application Configuration
FLASK_ENV=production
APP_NAME=FormAutomationPlatform
APP_VERSION=1.0.0
DEBUG=False

# üîë Security Keys (GENERATE UNIQUE VALUES!)
# Use: openssl rand -hex 32 to generate secure keys
SECRET_KEY=CHANGE-THIS-IN-PRODUCTION-USE-OPENSSL-RAND-HEX-32
JWT_SECRET_KEY=CHANGE-THIS-IN-PRODUCTION-USE-OPENSSL-RAND-HEX-32
JWT_ACCESS_TOKEN_EXPIRES=3600
JWT_REFRESH_TOKEN_EXPIRES=2592000

# üõ°Ô∏è Security Headers
SECURITY_HEADERS_ENABLED=true
FORCE_HTTPS=true
HSTS_MAX_AGE=31536000
CONTENT_SECURITY_POLICY=default-src 'self'; script-src 'self' 'unsafe-inline'; style-src 'self' 'unsafe-inline' fonts.googleapis.com; font-src 'self' fonts.gstatic.com; img-src 'self' data: https:; connect-src 'self' wss: https:

# üîí HTTPS/SSL Configuration
SSL_CERT_PATH=/etc/nginx/ssl/cert.pem
SSL_KEY_PATH=/etc/nginx/ssl/key.pem
SSL_PROTOCOLS=TLSv1.2 TLSv1.3
SSL_CIPHERS=ECDHE-RSA-AES128-GCM-SHA256:ECDHE-RSA-AES256-GCM-SHA384

# üö¶ Rate Limiting Configuration
RATE_LIMIT_ENABLED=true
RATE_LIMIT_DEFAULT=200 per day, 50 per hour
RATE_LIMIT_AUTH=10 per minute
RATE_LIMIT_API=30 per minute
RATE_LIMIT_UPLOAD=5 per minute

# üóÑÔ∏è Database Configuration (PostgreSQL)
DATABASE_URL=postgresql://prototype_user:CHANGE-SECURE-PASSWORD@postgres:5432/prototype
DB_POOL_SIZE=20
DB_POOL_TIMEOUT=30
DB_POOL_RECYCLE=3600
DB_MAX_OVERFLOW=30
DB_SSL_MODE=require

# PostgreSQL-specific settings
POSTGRES_DB=prototype
POSTGRES_USER=prototype_user
POSTGRES_PASSWORD=CHANGE-SECURE-PASSWORD-HERE

# üìä Redis Configuration
REDIS_URL=redis://:CHANGE-REDIS-PASSWORD@redis:6379/0
REDIS_PASSWORD=CHANGE-REDIS-PASSWORD-HERE
REDIS_SSL=true
REDIS_SSL_CERT_REQS=required

# üîÑ Celery Configuration
CELERY_BROKER_URL=redis://:CHANGE-REDIS-PASSWORD@redis:6379/0
CELERY_RESULT_BACKEND=redis://:CHANGE-REDIS-PASSWORD@redis:6379/0
CELERY_TASK_SERIALIZER=json
CELERY_RESULT_SERIALIZER=json
CELERY_ACCEPT_CONTENT=["json"]
CELERY_TIMEZONE=UTC
CELERY_WORKER_CONCURRENCY=4
CELERY_WORKER_MAX_TASKS_PER_CHILD=1000

# ‚òÅÔ∏è AWS Configuration (for S3 file storage)
AWS_ACCESS_KEY_ID=YOUR-AWS-ACCESS-KEY
AWS_SECRET_ACCESS_KEY=YOUR-AWS-SECRET-KEY
AWS_REGION=us-east-1
AWS_S3_BUCKET=your-secure-bucket-name
AWS_S3_ENCRYPTION=AES256

# üîê AWS Secrets Manager
USE_AWS_SECRETS=true
AWS_SECRETS_REGION=us-east-1
SECRET_ARN=arn:aws:secretsmanager:us-east-1:account:secret:your-secret

# ü§ñ AI Services API Keys
OPENAI_API_KEY=sk-YOUR-PRODUCTION-OPENAI-KEY
GOOGLE_AI_API_KEY=YOUR-PRODUCTION-GOOGLE-AI-KEY

# üìß Email Configuration (SendGrid)
SENDGRID_API_KEY=SG.YOUR-PRODUCTION-SENDGRID-KEY
FROM_EMAIL=noreply@yourdomain.com
SUPPORT_EMAIL=support@yourdomain.com

# üìä Monitoring & Logging
SENTRY_DSN=https://YOUR-SENTRY-DSN@sentry.io/PROJECT-ID
SENTRY_TRACES_SAMPLE_RATE=0.1
SENTRY_PROFILES_SAMPLE_RATE=0.1

# Log Configuration
LOG_LEVEL=INFO
LOG_FORMAT=json
LOG_FILE=/app/logs/production.log
LOG_MAX_BYTES=10485760
LOG_BACKUP_COUNT=5

# üîß Performance Configuration
WORKER_CONNECTIONS=1024
WORKER_PROCESSES=auto
KEEPALIVE_TIMEOUT=65
CLIENT_MAX_BODY_SIZE=16M
PROXY_BUFFER_SIZE=8k
PROXY_BUFFERS=32 8k

# üìà Monitoring Endpoints
HEALTH_CHECK_ENABLED=true
METRICS_ENABLED=true
METRICS_ENDPOINT=/metrics
PROMETHEUS_MULTIPROC_DIR=/tmp/prometheus_multiproc

# üåê CORS Configuration
CORS_ORIGINS=https://yourdomain.com,https://www.yourdomain.com
CORS_METHODS=GET,POST,PUT,DELETE,OPTIONS
CORS_ALLOW_HEADERS=Content-Type,Authorization,X-Requested-With

# üîê Session Configuration
SESSION_COOKIE_SECURE=true
SESSION_COOKIE_HTTPONLY=true
SESSION_COOKIE_SAMESITE=Strict
SESSION_COOKIE_NAME=__Secure-session
PERMANENT_SESSION_LIFETIME=1800

# üõ°Ô∏è Security Middleware
TRUSTED_PROXIES=127.0.0.1,10.0.0.0/8,172.16.0.0/12,192.168.0.0/16

# üîç Content Security
MAX_CONTENT_LENGTH=16777216
UPLOAD_FOLDER=/app/uploads
ALLOWED_EXTENSIONS=pdf,docx,xlsx,csv,jpg,jpeg,png

# üö® Security Monitoring
FAILED_LOGIN_ATTEMPTS_LIMIT=5
FAILED_LOGIN_WINDOW=300
ACCOUNT_LOCKOUT_DURATION=1800
SUSPICIOUS_ACTIVITY_THRESHOLD=10

# üîÑ Backup Configuration
BACKUP_ENABLED=true
BACKUP_SCHEDULE=0 2 * * *
BACKUP_RETENTION_DAYS=30
BACKUP_ENCRYPTION=true

# üåç Internationalization
DEFAULT_TIMEZONE=UTC
DEFAULT_LANGUAGE=en

# üöÄ Production Optimizations
COMPILED_ASSETS=true
ASSET_CDN_URL=https://cdn.yourdomain.com
STATIC_URL_PATH=/static
STATIC_FOLDER=static

# üì± Mobile/PWA Configuration
PWA_ENABLED=true
PUSH_NOTIFICATIONS_ENABLED=true
VAPID_PUBLIC_KEY=YOUR-VAPID-PUBLIC-KEY
VAPID_PRIVATE_KEY=YOUR-VAPID-PRIVATE-KEY
